(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{9032:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/samples/[styleId]",function(){return s(791)}])},5292:function(e,t,s){"use strict";var r=s(4836);t.Z=void 0;var a=r(s(3651)),l=s(5893);t.Z=(0,a.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},5639:function(e,t,s){"use strict";var r=s(4836);t.Z=void 0;var a=r(s(3651)),l=s(5893);t.Z=(0,a.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},4453:function(e,t,s){"use strict";var r=s(4836);t.Z=void 0;var a=r(s(3651)),l=s(5893);t.Z=(0,a.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},6568:function(e,t,s){"use strict";let r=s(7066).Z.create({baseURL:"http://localhost:3004/api",headers:{"Content-Type":"application/json"}});r.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject(e)}),t.Z={getAllSamples:async()=>{try{return(await r.get("/samples")).data}catch(e){throw console.error("Error fetching samples:",e),e}},getSampleById:async e=>{try{return(await r.get("/samples/".concat(e))).data}catch(t){throw console.error("Error fetching sample ".concat(e,":"),t),t}},createSample:async e=>{try{console.log("Sending sample data:",JSON.stringify(e));let t=JSON.parse(JSON.stringify(e));"number"!=typeof t.price&&(t.price=Number(t.price)||.01),"number"!=typeof t.quantity&&(t.quantity=Number(t.quantity)||0),t.images&&t.images.length>0&&(t.images=t.images.map(e=>({name:e.name,preview:e.preview}))),console.log("After conversion:",JSON.stringify(t));let s=setTimeout(()=>{throw console.error("API request timeout after 30 seconds"),Error("Request timeout - server took too long to respond")},3e4);try{let e=await r.post("/samples",t);return clearTimeout(s),e.data}catch(e){throw clearTimeout(s),console.error("API error details:",e),e.response&&(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data)),e}}catch(e){throw console.error("Error creating sample:",e),e}},updateSample:async(e,t)=>{try{return(await r.put("/samples/".concat(e),t)).data}catch(t){throw console.error("Error updating sample ".concat(e,":"),t),t}},deleteSample:async e=>{try{return(await r.delete("/samples/".concat(e))).data}catch(t){throw console.error("Error deleting sample ".concat(e,":"),t),t}}}},5439:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var r=s(5893),a=s(7294),l=s(1508),n=s(5774),i=s(9726),o=s(9857);let c=s(3454).env.NEXT_PUBLIC_PRODUCTION_URL||"https://yourdomain.com",d=()=>"localhost"===window.location.hostname,m=()=>d()?window.location.origin:c,p=e=>"".concat(m(),"/samples/").concat(e);var x=e=>{let{styleId:t,size:s=200}=e,[c,d]=(0,a.useState)({show:!1,message:"",type:"success"}),m=(0,a.useRef)(null),x=p(t);return c.show&&setTimeout(()=>{d({...c,show:!1})},3e3),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-center text-gray-800 mb-4",children:"QR Code"}),(0,r.jsx)("div",{className:"flex justify-center p-4 bg-white border border-gray-100 rounded-lg",ref:m,children:(0,r.jsx)(l.tv,{value:x,size:s,level:"H",includeMargin:!0,imageSettings:{src:"/logo.png",excavate:!0,height:24,width:24}})}),(0,r.jsx)("p",{className:"text-sm text-center text-gray-500 mt-3",children:"Scan to view sample details"})]}),(0,r.jsxs)("div",{className:"px-4 pb-5 pt-2 flex flex-col gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{let e=document.createElement("canvas"),r=m.current.querySelector("svg"),a=new XMLSerializer().serializeToString(r),l=new Image;l.onload=()=>{e.width=s,e.height=s;let r=e.getContext("2d");r.fillStyle="#ffffff",r.fillRect(0,0,e.width,e.height),r.drawImage(l,0,0);let a=e.toDataURL("image/png"),n=document.createElement("a");n.download="sample-".concat(t,".png"),n.href=a,n.click(),d({show:!0,message:"QR Code downloaded successfully",type:"success"})},l.src="data:image/svg+xml;base64,".concat(btoa(a))},className:"w-full flex items-center justify-center gap-2 bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:[(0,r.jsx)(n.Z,{fontSize:"small"}),(0,r.jsx)("span",{className:"font-medium",children:"Download"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{let e=window.open("","_blank"),s=m.current.querySelector("svg"),r=new XMLSerializer().serializeToString(s);e.document.write("\n      <html>\n        <head>\n          <title>Print QR Code - ".concat(t,'</title>\n          <style>\n            body {\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              height: 100vh;\n              margin: 0;\n              padding: 20px;\n              box-sizing: border-box;\n              font-family: Arial, sans-serif;\n            }\n            .qr-container {\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              padding: 20px;\n              border: 1px solid #ddd;\n              border-radius: 8px;\n            }\n            .style-id {\n              margin-top: 12px;\n              font-size: 18px;\n              font-weight: bold;\n            }\n            @media print {\n              .no-print {\n                display: none;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="qr-container">\n            ').concat(r,'\n            <div class="style-id">Style ID: ').concat(t,'</div>\n          </div>\n          <p class="no-print" style="margin-top: 20px;">\n            <button onclick="window.print();window.close();">Print</button>\n          </p>\n        </body>\n      </html>\n    ')),e.document.close()},className:"flex items-center justify-center gap-2 border border-gray-300 py-3 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(i.Z,{fontSize:"small"}),(0,r.jsx)("span",{className:"font-medium",children:"Print"})]}),(0,r.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(x).then(()=>{d({show:!0,message:"URL copied to clipboard",type:"success"})},e=>{d({show:!0,message:"Failed to copy URL",type:"error"}),console.error("Could not copy text: ",e)})},className:"flex items-center justify-center gap-2 border border-gray-300 py-3 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.Z,{fontSize:"small"}),(0,r.jsx)("span",{className:"font-medium",children:"Copy URL"})]})]})]}),c.show&&(0,r.jsx)("div",{className:"fixed bottom-4 right-4 p-4 rounded-md shadow-lg ".concat("success"===c.type?"bg-green-50 text-green-800 border-l-4 border-green-500":"bg-red-50 text-red-800 border-l-4 border-red-500"," z-50 transition-all"),children:c.message})]})}},791:function(e,t,s){"use strict";s.r(t);var r=s(5893),a=s(7294),l=s(1163),n=s(1664),i=s.n(n),o=s(5292),c=s(4453),d=s(5639),m=s(5439),p=s(6568);t.default=()=>{var e,t;let s=(0,l.useRouter)(),[n,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null),[f,b]=(0,a.useState)(null),[v,j]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{try{h(!0),y(null);let e=await p.Z.getSampleById(s.query.styleId);e.success?x(e.data):y("Failed to load sample data")}catch(t){var e;console.error("Error fetching sample ".concat(s.query.styleId,":"),t),(null===(e=t.response)||void 0===e?void 0:e.status)===404?y("Sample with ID ".concat(s.query.styleId," not found")):y("An error occurred while fetching the sample")}finally{h(!1)}})()},[s.query.styleId]);let w=async()=>{if(window.confirm("Are you sure you want to delete sample ".concat(s.query.styleId,"?")))try{h(!0),await p.Z.deleteSample(s.query.styleId),s.push("/samples",{state:{message:"Sample ".concat(s.query.styleId," deleted successfully")}})}catch(e){console.error("Error deleting sample ".concat(s.query.styleId,":"),e),y("Failed to delete the sample"),h(!1)}},N=(e,t)=>{b(e),j(t)},S=()=>{b(null)};if(u)return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"w-16 h-16 border-t-4 border-primary-500 border-solid rounded-full animate-spin"})});if(g)return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)(i(),{href:"/samples",className:"inline-flex items-center text-lg font-medium text-primary-600 hover:text-primary-800",children:[(0,r.jsx)(o.Z,{className:"mr-2"}),"Back to Samples"]}),(0,r.jsxs)("div",{className:"mt-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:[(0,r.jsx)("div",{className:"text-red-700 font-bold",children:"Error"}),(0,r.jsx)("div",{className:"text-red-600",children:g})]})]});let _=e=>!(null==e||"string"==typeof e&&""===e.trim()||Array.isArray(e)&&0===e.length);return(0,r.jsxs)("div",{className:"max-w-5xl mx-auto px-4 pb-16",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)(i(),{href:"/samples",className:"inline-flex items-center text-lg font-medium text-gray-700 hover:text-primary-600",children:[(0,r.jsx)(o.Z,{className:"mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,r.jsxs)("button",{onClick:w,className:"inline-flex items-center px-3 py-2 border border-red-600 text-red-600 rounded-md hover:bg-red-50",children:[(0,r.jsx)(c.Z,{className:"mr-1"}),(0,r.jsx)("span",{className:"text-sm",children:"Delete"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:n.style_id}),_(n.images)&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-xl overflow-hidden mb-2",children:n.images.length>0&&(0,r.jsx)("img",{src:n.images[v].preview,alt:"".concat(n.style_id," - View ").concat(v+1),className:"w-full h-full object-cover",onClick:()=>N(n.images[v],v)})}),n.images.length>1&&(0,r.jsx)("div",{className:"grid grid-cols-5 gap-2",children:n.images.map((e,t)=>(0,r.jsx)("button",{className:"aspect-square rounded-md overflow-hidden border-2 ".concat(t===v?"border-primary-500":"border-transparent"),onClick:()=>j(t),children:(0,r.jsx)("img",{src:e.preview,alt:"Thumbnail ".concat(t+1),className:"w-full h-full object-cover"})},t))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[_(n.price)&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["$",n.price.toFixed(2)]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Price"})]}),_(n.quantity)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:n.quantity}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Quantity"})]})]}),_(n.available_colors)&&(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Available Colors"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:n.available_colors.map(e=>(0,r.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:e},e))})]}),(0,r.jsxs)("div",{className:"py-4 border-t border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Fabric Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8",children:[_(n.fabric_weight)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Weight"}),(0,r.jsxs)("p",{className:"text-base font-medium",children:[n.fabric_weight," g/m\xb2"]})]}),_(n.fabric_composition)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Composition"}),(0,r.jsx)("p",{className:"text-base font-medium",children:n.fabric_composition})]})]})]}),(0,r.jsx)("div",{className:"py-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Created"}),(0,r.jsx)("p",{children:new Date((null===(e=n.created_at)||void 0===e?void 0:e.seconds)?1e3*n.created_at.seconds:n.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Updated"}),(0,r.jsx)("p",{children:new Date((null===(t=n.updated_at)||void 0===t?void 0:t.seconds)?1e3*n.updated_at.seconds:n.updated_at).toLocaleDateString()})]})]})})]})]}),(0,r.jsx)("div",{className:"lg:col-span-4",children:(0,r.jsx)("div",{className:"sticky top-4",children:(0,r.jsx)(m.Z,{styleId:n.style_id})})})]}),f&&(0,r.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",onClick:S,children:[(0,r.jsx)("button",{className:"absolute top-4 right-4 text-white p-2 rounded-full bg-black bg-opacity-50 hover:bg-opacity-70",onClick:S,children:(0,r.jsx)(d.Z,{})}),(0,r.jsx)("img",{src:f.preview,alt:f.name||"".concat(n.style_id," image"),className:"max-w-full max-h-[90vh] object-contain",onClick:e=>e.stopPropagation()})]})]})}}},function(e){e.O(0,[651,66,203,888,774,179],function(){return e(e.s=9032)}),_N_E=e.O()}]);
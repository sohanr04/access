(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{1720:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return s(9551)}])},6568:function(e,r,s){"use strict";let t=s(7066).Z.create({baseURL:"http://localhost:3004/api",headers:{"Content-Type":"application/json"}});t.interceptors.response.use(e=>e,e=>{var r;return console.error("API Error:",(null===(r=e.response)||void 0===r?void 0:r.data)||e.message),Promise.reject(e)}),r.Z={getAllSamples:async()=>{try{return(await t.get("/samples")).data}catch(e){throw console.error("Error fetching samples:",e),e}},getSampleById:async e=>{try{return(await t.get("/samples/".concat(e))).data}catch(r){throw console.error("Error fetching sample ".concat(e,":"),r),r}},createSample:async e=>{try{console.log("Sending sample data:",JSON.stringify(e));let r=JSON.parse(JSON.stringify(e));"number"!=typeof r.price&&(r.price=Number(r.price)||.01),"number"!=typeof r.quantity&&(r.quantity=Number(r.quantity)||0),r.images&&r.images.length>0&&(r.images=r.images.map(e=>({name:e.name,preview:e.preview}))),console.log("After conversion:",JSON.stringify(r));let s=setTimeout(()=>{throw console.error("API request timeout after 30 seconds"),Error("Request timeout - server took too long to respond")},3e4);try{let e=await t.post("/samples",r);return clearTimeout(s),e.data}catch(e){throw clearTimeout(s),console.error("API error details:",e),e.response&&(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data)),e}}catch(e){throw console.error("Error creating sample:",e),e}},updateSample:async(e,r)=>{try{return(await t.put("/samples/".concat(e),r)).data}catch(r){throw console.error("Error updating sample ".concat(e,":"),r),r}},deleteSample:async e=>{try{return(await t.delete("/samples/".concat(e))).data}catch(r){throw console.error("Error deleting sample ".concat(e,":"),r),r}}}},9551:function(e,r,s){"use strict";s.r(r);var t=s(5893),a=s(7294),n=s(1664),l=s.n(n),o=s(990),i=s(7182),c=s(6788),d=s(4677),x=s(666),m=s(8573),h=s(762),p=s(1919),u=s(8864),y=s(4563),j=s(2886),f=s(5678),g=s(2911),v=s(6568);r.default=()=>{let[e,r]=(0,a.useState)({totalSamples:0,totalColors:0,averagePrice:0}),[s,n]=(0,a.useState)([]),[Z,b]=(0,a.useState)(!0),[w,S]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{b(!0);let e=await v.Z.getAllSamples();if(e.success){let s=e.data,t=s.length,a=s.flatMap(e=>e.available_colors),l=new Set(a).size,o=s.reduce((e,r)=>e+(r.price||0),0);r({totalSamples:t,totalColors:l,averagePrice:t>0?o/t:0});let i=[...s].sort((e,r)=>{var s,t,a,n;let l=(null===(t=e.created_at)||void 0===t?void 0:null===(s=t.toDate)||void 0===s?void 0:s.call(t))||new Date(e.created_at);return((null===(n=r.created_at)||void 0===n?void 0:null===(a=n.toDate)||void 0===a?void 0:a.call(n))||new Date(r.created_at))-l});n(i.slice(0,5))}}catch(e){console.error("Error fetching dashboard data:",e),S("Failed to load dashboard data. Please try again later.")}finally{b(!1)}})()},[]),Z)?(0,t.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,t.jsx)(i.Z,{})}):(0,t.jsxs)(o.Z,{children:[(0,t.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,t.jsx)(c.Z,{variant:"h4",children:"Dashboard"}),(0,t.jsx)(l(),{href:"/samples/new",passHref:!0,children:(0,t.jsx)(d.Z,{variant:"contained",startIcon:(0,t.jsx)(y.Z,{}),children:"Add New Sample"})})]}),w&&(0,t.jsx)(x.Z,{severity:"error",sx:{mb:4},children:w}),(0,t.jsxs)(m.ZP,{container:!0,spacing:3,sx:{mb:4},children:[(0,t.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{children:(0,t.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(j.Z,{sx:{fontSize:40,color:"primary.main",mr:2}}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(c.Z,{variant:"h4",color:"primary.main",children:e.totalSamples}),(0,t.jsx)(c.Z,{variant:"subtitle1",children:"Total Samples"})]})]})})}),(0,t.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{children:(0,t.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(f.Z,{sx:{fontSize:40,color:"secondary.main",mr:2}}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(c.Z,{variant:"h4",color:"secondary.main",children:e.totalColors}),(0,t.jsx)(c.Z,{variant:"subtitle1",children:"Unique Colors"})]})]})})}),(0,t.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(h.Z,{children:(0,t.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(g.Z,{sx:{fontSize:40,color:"success.main",mr:2}}),(0,t.jsxs)(o.Z,{children:[(0,t.jsxs)(c.Z,{variant:"h4",color:"success.main",children:["$",e.averagePrice.toFixed(2)]}),(0,t.jsx)(c.Z,{variant:"subtitle1",children:"Average Price"})]})]})})})]}),(0,t.jsx)(c.Z,{variant:"h5",sx:{mb:2},children:"Recent Samples"}),s.length>0?(0,t.jsx)(m.ZP,{container:!0,spacing:2,children:s.map(e=>{var r,s;return(0,t.jsx)(m.ZP,{item:!0,xs:12,children:(0,t.jsx)(l(),{href:"/samples/".concat(e.style_id),passHref:!0,style:{textDecoration:"none"},children:(0,t.jsxs)(u.Z,{sx:{p:2,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{sm:"center"},textDecoration:"none",color:"inherit",transition:"background-color 0.2s","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,t.jsxs)(o.Z,{sx:{flex:1},children:[(0,t.jsx)(c.Z,{variant:"h6",color:"primary.main",children:e.style_id}),(0,t.jsx)(c.Z,{variant:"body2",color:"text.secondary",children:new Date((null===(r=e.created_at)||void 0===r?void 0:r.seconds)?1e3*e.created_at.seconds:e.created_at).toLocaleDateString()})]}),(0,t.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",mt:{xs:2,sm:0}},children:[(0,t.jsxs)(c.Z,{variant:"body1",sx:{mr:3},children:["$",null===(s=e.price)||void 0===s?void 0:s.toFixed(2)]}),(0,t.jsxs)(c.Z,{variant:"body2",color:"text.secondary",sx:{mr:3},children:["Qty: ",e.quantity]}),(0,t.jsxs)(o.Z,{sx:{display:"flex",flexWrap:"wrap",maxWidth:200},children:[e.available_colors.slice(0,3).map(e=>(0,t.jsx)(c.Z,{variant:"body2",sx:{bgcolor:"rgba(0, 0, 0, 0.08)",px:1,py:.5,borderRadius:1,mr:.5,mb:.5},children:e},e)),e.available_colors.length>3&&(0,t.jsxs)(c.Z,{variant:"body2",sx:{bgcolor:"rgba(0, 0, 0, 0.08)",px:1,py:.5,borderRadius:1,mr:.5,mb:.5},children:["+",e.available_colors.length-3," more"]})]})]})]})})},e.style_id)})}):(0,t.jsx)(x.Z,{severity:"info",children:'No samples found. Create your first sample by clicking "Add New Sample".'}),s.length>0&&(0,t.jsx)(o.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,t.jsx)(l(),{href:"/samples",passHref:!0,children:(0,t.jsx)(d.Z,{variant:"outlined",children:"View All Samples"})})})]})}}},function(e){e.O(0,[651,66,138,914,663,888,774,179],function(){return e(e.s=1720)}),_N_E=e.O()}]);
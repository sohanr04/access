(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{6104:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/samples",function(){return s(1584)}])},6568:function(e,t,s){"use strict";let r=s(7066).Z.create({baseURL:"http://localhost:3004/api",headers:{"Content-Type":"application/json"}});r.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject(e)}),t.Z={getAllSamples:async()=>{try{return(await r.get("/samples")).data}catch(e){throw console.error("Error fetching samples:",e),e}},getSampleById:async e=>{try{return(await r.get("/samples/".concat(e))).data}catch(t){throw console.error("Error fetching sample ".concat(e,":"),t),t}},createSample:async e=>{try{console.log("Sending sample data:",JSON.stringify(e));let t=JSON.parse(JSON.stringify(e));"number"!=typeof t.price&&(t.price=Number(t.price)||.01),"number"!=typeof t.quantity&&(t.quantity=Number(t.quantity)||0),t.images&&t.images.length>0&&(t.images=t.images.map(e=>({name:e.name,preview:e.preview}))),console.log("After conversion:",JSON.stringify(t));let s=setTimeout(()=>{throw console.error("API request timeout after 30 seconds"),Error("Request timeout - server took too long to respond")},3e4);try{let e=await r.post("/samples",t);return clearTimeout(s),e.data}catch(e){throw clearTimeout(s),console.error("API error details:",e),e.response&&(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data)),e}}catch(e){throw console.error("Error creating sample:",e),e}},updateSample:async(e,t)=>{try{return(await r.put("/samples/".concat(e),t)).data}catch(t){throw console.error("Error updating sample ".concat(e,":"),t),t}},deleteSample:async e=>{try{return(await r.delete("/samples/".concat(e))).data}catch(t){throw console.error("Error deleting sample ".concat(e,":"),t),t}}}},1584:function(e,t,s){"use strict";s.r(t);var r=s(5893),a=s(7294),n=s(1664),l=s.n(n),o=s(1163),i=s(990),c=s(6788),d=s(4677),p=s(666),u=s(3234),h=s(5611),m=s(7182),x=s(5026),g=s(8864),y=s(6592),j=s(360),Z=s(6577),f=s(8863),v=s(9827),w=s(8690),_=s(5895),b=s(1873),S=s(4563),E=s(5299),N=s(3604),C=s(8443),A=s(1596),I=s(6568);t.default=()=>{var e;let t=(0,o.useRouter)(),[s,n]=(0,a.useState)([]),[k,P]=(0,a.useState)([]),[q,D]=(0,a.useState)(!0),[T,L]=(0,a.useState)(null),[O,R]=(0,a.useState)(""),[W,z]=(0,a.useState)((null===(e=t.query)||void 0===e?void 0:e.message)||"");return(0,a.useEffect)(()=>{(async()=>{try{D(!0);let e=await I.Z.getAllSamples();if(e.success){let t=e.data.sort((e,t)=>{var s,r,a,n;let l=(null===(r=e.created_at)||void 0===r?void 0:null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(e.created_at);return((null===(n=t.created_at)||void 0===n?void 0:null===(a=n.toDate)||void 0===a?void 0:a.call(n))||new Date(t.created_at))-l});n(t),P(t)}else L("Failed to load samples")}catch(e){console.error("Error fetching samples:",e),L("An error occurred while fetching samples")}finally{D(!1)}})()},[]),(0,a.useEffect)(()=>{if(""===O.trim())P(s);else{let e=O.toLowerCase();P(s.filter(t=>t.style_id.toLowerCase().includes(e)||t.packaging.type.toLowerCase().includes(e)||t.available_colors.some(t=>t.toLowerCase().includes(e))))}},[O,s]),(0,a.useEffect)(()=>{if(W){let e=setTimeout(()=>{t.push("/samples",{query:{message:""}})},5e3);return()=>clearTimeout(e)}},[W,t]),(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,r.jsx)(c.Z,{variant:"h4",children:"All Samples"}),(0,r.jsx)(d.Z,{variant:"contained",component:l(),href:"/samples/new",startIcon:(0,r.jsx)(S.Z,{}),children:"Add New Sample"})]}),W&&(0,r.jsx)(p.Z,{severity:"success",sx:{mb:3},children:W}),T&&(0,r.jsx)(p.Z,{severity:"error",sx:{mb:3},children:T}),(0,r.jsx)(i.Z,{sx:{mb:3},children:(0,r.jsx)(u.Z,{fullWidth:!0,placeholder:"Search by Style ID, packaging type, or color",value:O,onChange:e=>{R(e.target.value)},InputProps:{startAdornment:(0,r.jsx)(h.Z,{position:"start",children:(0,r.jsx)(E.Z,{})})}})}),q?(0,r.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,r.jsx)(m.Z,{})}):k.length>0?(0,r.jsx)(x.Z,{component:g.Z,children:(0,r.jsxs)(y.Z,{sx:{minWidth:650},children:[(0,r.jsx)(j.Z,{children:(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(f.Z,{children:"Image"}),(0,r.jsx)(f.Z,{children:"Style ID"}),(0,r.jsx)(f.Z,{children:"Price"}),(0,r.jsx)(f.Z,{children:"Quantity"}),(0,r.jsx)(f.Z,{children:"Colors"}),(0,r.jsx)(f.Z,{children:"Packaging"}),(0,r.jsx)(f.Z,{children:"Created"}),(0,r.jsx)(f.Z,{align:"center",children:"Actions"})]})}),(0,r.jsx)(v.Z,{children:k.map(e=>{var t,s;return(0,r.jsxs)(Z.Z,{hover:!0,children:[(0,r.jsx)(f.Z,{children:e.images&&e.images.length>0?(0,r.jsx)(w.Z,{title:"View sample details",children:(0,r.jsx)(_.Z,{component:l(),href:"/samples/".concat(e.style_id),src:e.images[0].preview,alt:e.style_id,variant:"rounded",sx:{width:48,height:48,cursor:"pointer",border:"1px solid #eee"}})}):(0,r.jsx)(_.Z,{variant:"rounded",sx:{width:48,height:48,bgcolor:"rgba(0, 0, 0, 0.08)"},children:(0,r.jsx)(A.Z,{color:"action"})})}),(0,r.jsx)(f.Z,{component:"th",scope:"row",children:(0,r.jsx)(c.Z,{variant:"body1",fontWeight:500,children:e.style_id})}),(0,r.jsxs)(f.Z,{children:["$",null===(t=e.price)||void 0===t?void 0:t.toFixed(2)]}),(0,r.jsx)(f.Z,{children:e.quantity}),(0,r.jsx)(f.Z,{children:(0,r.jsxs)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5,maxWidth:200},children:[e.available_colors.slice(0,3).map(e=>(0,r.jsx)(b.Z,{label:e,size:"small",sx:{mr:.5,mb:.5}},e)),e.available_colors.length>3&&(0,r.jsx)(b.Z,{label:"+".concat(e.available_colors.length-3),size:"small",variant:"outlined"})]})}),(0,r.jsx)(f.Z,{children:e.packaging.type}),(0,r.jsx)(f.Z,{children:new Date((null===(s=e.created_at)||void 0===s?void 0:s.seconds)?1e3*e.created_at.seconds:e.created_at).toLocaleDateString()}),(0,r.jsx)(f.Z,{align:"center",children:(0,r.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)(d.Z,{component:l(),href:"/samples/".concat(e.style_id),startIcon:(0,r.jsx)(C.Z,{}),size:"small",sx:{mr:1},children:"View"}),(0,r.jsx)(d.Z,{component:l(),href:"/samples/".concat(e.style_id),startIcon:(0,r.jsx)(N.Z,{}),size:"small",variant:"outlined",children:"QR"})]})})]},e.style_id)})})]})}):(0,r.jsx)(p.Z,{severity:"info",children:O?"No samples found matching your search criteria":'No samples found. Create your first sample by clicking "Add New Sample".'})]})}}},function(e){e.O(0,[651,66,138,914,832,888,774,179],function(){return e(e.s=6104)}),_N_E=e.O()}]);